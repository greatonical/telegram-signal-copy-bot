# Fly.io Configuration for Telegram Signal Copy Bot
# This file enables easy deployment to Fly.io
# Other platforms (Railway, Render, etc.) will auto-detect the Dockerfile

app = "telegram-signal-copy-bot"
primary_region = "lhr"  # Change to your preferred region (iad=US East, lhr=London, fra=Frankfurt, etc.)

[build]
  # Fly.io will automatically detect and use your Dockerfile

[env]
  # Non-sensitive environment variables can go here
  # Sensitive vars (API_ID, API_HASH, PHONE_NUMBER) should be set via: fly secrets set KEY=value

[mounts]
  # OPTIONAL: Persistent volume for session files
  # Session files are already included in the Docker image from Git
  # This volume provides additional persistence if you want to update sessions without redeploying
  source = "telegram_sessions"
  destination = "/app/sessions"
  initial_size = "1gb"

[mounts]
  # OPTIONAL: Persistent volume for logs
  # Keeps logs across deployments for debugging
  source = "telegram_logs"
  destination = "/app/logs"
  initial_size = "1gb"

[[services]]
  # This is a background worker, not a web service
  # No ports need to be exposed
  internal_port = 8080
  protocol = "tcp"
  auto_stop_machines = false  # Keep running 24/7
  auto_start_machines = true
  min_machines_running = 1

  # Health check to ensure bot stays running
  [[services.tcp_checks]]
    interval = "15s"
    timeout = "2s"
    grace_period = "10s"

# Resource allocation
[vm]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 256  # Telegram bots are lightweight
